<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Admin Dashboard</title>
    <link rel="icon" href="../../static/images/icon.png" />
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vue@2.6.14/dist/vue.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>
    <script
      defer
      src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"
    ></script>
  </head>
  <body class="bg-gray-100">
    <div x-data="{ sidebarOpen: false }" class="flex h-screen bg-gray-100">
      <!-- Sidebar -->
      <div
        :class="sidebarOpen ? 'translate-x-0' : '-translate-x-full'"
        class="bg-white text-black-900 shadow-md w-64 space-y-6 py-7 px-2 absolute inset-y-0 left-0 transform -translate-x-full md:relative md:translate-x-0 transition duration-200 ease-in-out md:flex md:flex-col md:justify-between overflow-y-auto"
      >
        <div>
          <h2 class="text-2xl font-bold text-center">
            HUMAS
            <button
              @click="sidebarOpen = false"
              class="text-white md:hidden ml-2 absolute top-4 right-4"
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                class="h-6 w-6"
                fill="none"
                viewBox="0 0 24 24"
                stroke="currentColor"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M6 18L18 6M6 6l12 12"
                />
              </svg>
            </button>
          </h2>
          <!-- Navigation -->
          <nav class="mt-10">
            <!-- dashboard -->
            <div
              class="flex mb-2 text-gray-500 items-center transition duration-300 rounded-lg hover:bg-[#7443E1] hover:text-white border-none"
            >
              <a
                class="block py-2.5 px-2 rounded flex items-center gap-2"
                href="dashboard.html"
              >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke-width="1.5"
                  stroke="currentColor"
                  class="size-6"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    d="m2.25 12 8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"
                  />
                </svg>
                Dashboard
              </a>
            </div>
            <!-- end -->
            <div class="h-px my-2 bg-gray-200"></div>
            <!-- General -->
            <div
              class="flex text-gray-500 items-center transition duration-300 rounded-lg hover:bg-[#7443E1] hover:text-white border-none"
            >
              <a
                class="block py-2.5 px-2 rounded flex items-center gap-2"
                href="general.html"
              >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke-width="1.5"
                  stroke="currentColor"
                  class="size-6"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    d="M15 19.128a9.38 9.38 0 0 0 2.625.372 9.337 9.337 0 0 0 4.121-.952 4.125 4.125 0 0 0-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 0 1 8.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0 1 11.964-3.07M12 6.375a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0Zm8.25 2.25a2.625 2.625 0 1 1-5.25 0 2.625 2.625 0 0 1 5.25 0Z"
                  />
                </svg>

                General
              </a>
            </div>
            <!-- end -->
            <div class="h-px my-2 bg-gray-200"></div>
            <!-- chart1 -->
            <div
              class="flex mb-2 text-gray-500 items-center transition duration-300 rounded-lg hover:bg-[#7443E1] hover:text-white border-none"
            >
              <a
                class="block py-2.5 px-2 rounded flex items-center gap-2"
                href="chart1.html"
              >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke-width="1.5"
                  stroke="currentColor"
                  class="size-6"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    d="M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75ZM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625ZM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125Z"
                  />
                </svg>

                Chart Humas
              </a>
            </div>
            <!-- end -->
            <!-- chart2 -->
            <div
              class="flex mb-4 items-center transition duration-200 rounded-lg bg-[#7443E1] hover:bg-[#7c3aed] text-white border-none"
            >
              <a
                class="block py-2.5 px-2 rounded flex items-center gap-2"
                href=""
              >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke-width="1.5"
                  stroke="currentColor"
                  class="size-6"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    d="M10.5 6a7.5 7.5 0 1 0 7.5 7.5h-7.5V6Z"
                  />
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    d="M13.5 10.5H21A7.5 7.5 0 0 0 13.5 3v7.5Z"
                  />
                </svg>

                Chart BKK
              </a>
            </div>
            <!-- end -->
            <div class="h-px my-2 bg-gray-200"></div>
            <!-- sosial -->
            <div
              class="flex mb-2 text-gray-500 items-center transition duration-300 rounded-lg hover:bg-[#7443E1] hover:text-white border-none"
            >
              <a
                class="block py-2.5 px-2 rounded flex items-center gap-2"
                href="sosial.html"
              >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke-width="1.5"
                  stroke="currentColor"
                  class="size-6"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    d="m2.25 15.75 5.159-5.159a2.25 2.25 0 0 1 3.182 0l5.159 5.159m-1.5-1.5 1.409-1.409a2.25 2.25 0 0 1 3.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 0 0 1.5-1.5V6a1.5 1.5 0 0 0-1.5-1.5H3.75A1.5 1.5 0 0 0 2.25 6v12a1.5 1.5 0 0 0 1.5 1.5Zm10.5-11.25h.008v.008h-.008V8.25Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"
                  />
                </svg>
                Sosial
              </a>
            </div>
            <!-- end -->
          </nav>
          <!-- End Navigation -->
        </div>
      </div>
      <!-- End Sidebar -->

      <!-- Content -->
      <div class="flex-1 flex flex-col overflow-hidden">
        <!-- Top bar -->
        <header class="bg-white shadow-md">
          <div
            class="max-w-7xl mx-auto py-4 px-4 sm:px-6 lg:px-8 flex justify-between items-center"
          >
            <button
              @click="sidebarOpen = !sidebarOpen"
              class="text-gray-500 focus:outline-none focus:text-gray-700 md:hidden"
            >
              <svg
                class="h-6 w-6"
                fill="none"
                viewBox="0 0 24 24"
                stroke="currentColor"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M4 6h16M4 12h16M4 18h16"
                ></path>
              </svg>
            </button>
            <h1 class="text-2xl font-semibold text-gray-800">Chart BKK</h1>
            <div class="flex items-center">
              <span class="text-gray-600 mr-4"
                >Selamat Datang, <span>Admin</span></span
              >
              <a class="text-[#7443E1]" href="">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke-width="1.5"
                  stroke="currentColor"
                  class="size-6"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    d="M15.75 9V5.25A2.25 2.25 0 0 0 13.5 3h-6a2.25 2.25 0 0 0-2.25 2.25v13.5A2.25 2.25 0 0 0 7.5 21h6a2.25 2.25 0 0 0 2.25-2.25V15M12 9l-3 3m0 0 3 3m-3-3h12.75"
                  />
                </svg>
              </a>
            </div>
          </div>
        </header>

        <!-- Main content -->
        <main class="flex-1 overflow-x-hidden overflow-y-auto bg-gray-100">
          <div class="container mx-auto px-6 py-8">
            <!-- Chart -->
            <div class="max-w-5xl mx-auto py-1">
              <div class="grid grid-cols-1 gap-6 sm:grid-cols-2">
                <div class="text-black p-6 rounded-lg shadow-lg" id="ChartAlumni">
                  Chart 3
                </div>
                <div class="text-black p-6 rounded-lg shadow-lg" id="Chart4">
                  Chart 4
                </div>
              </div>
            </div>
            <br />
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
              <!--Data Kerja -->
              <div class="bg-white rounded-lg shadow-md p-6">
                <h2 class="text-xl font-semibold mb-4">STATUS</h2>
                <form id="StatusForm" class="space-y-4">
                  <div>
                    <label
                      for="Status"
                      class="block text-gray-700 font-bold mb-2"
                      >Status</label
                    >
                    <select
                      id="KerjaStatus"
                      name="Status"
                      class="shadow border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
                    >
                      <option value="">Langsung Kerja</option>
                      <option value="">Belum Kerja</option>
                    </select>
                  </div>
                  <div>
                    <label
                      for="Year"
                      class="block text-sm font-medium text-gray-700"
                      >Tahun</label
                    >
                    <input
                      type="number"
                      id="YearCount"
                      placeholder="Tahun "
                      name="YearCount"
                      min="0"
                      class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
                      required
                    />
                  </div>
                  <div>
                    <label
                      for="Count"
                      class="block text-sm font-medium text-gray-700"
                      >Jumlah</label
                    >
                    <input
                      type="number"
                      id="JumlahCount"
                      placeholder="Tambah Jumlah Disini"
                      name="JumlahCount"
                      min="0"
                      class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
                      required
                    />
                  </div>
                  <button
                    type="submit"
                    class="w-full bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline"
                  >
                    Kirim
                  </button>
                </form>
              </div>

              <!-- Jumlah Lowongan -->
              <div class="bg-white p-6 rounded-lg shadow-md">
                <h2 class="text-xl font-semibold mb-4">LOWONGAN</h2>
                <form id="studentCountForm" class="space-y-4">
                  <div>
                    <label
                      for="pklMonth"
                      class="block text-sm font-medium text-gray-700"
                      >Bulan</label
                    >
                    <select
                      id="pklMonth"
                      name="pklMonth"
                      class="mt-1 shadow border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
                    >
                      <option value="0">Januari</option>
                      <option value="1">Februari</option>
                      <option value="2">Maret</option>
                      <option value="3">April</option>
                      <option value="4">Mei</option>
                      <option value="5">Juni</option>
                      <option value="6">Juli</option>
                      <option value="7">Augustus</option>
                      <option value="8">September</option>
                      <option value="9">October</option>
                      <option value="10">November</option>
                      <option value="11">Desember</option>
                    </select>
                  </div>
                  <div>
                    <label
                      for="studentCount"
                      class="block text-gray-700 font-bold mb-2"
                      >Jumlah</label
                    >
                    <input
                      type="number"
                      id="studentCount"
                      name="studentCount"
                      min="0"
                      class="mt-1 shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
                      required
                    />
                  </div>
                  <button
                    type="submit"
                    class="w-full bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline"
                  >
                    Kirim
                  </button>
                </form>
              </div>
            </div>
            <!-- End -->
            <br>
            <!-- Form Edit -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
              <!--Data Kerja Edit -->
              <div class="bg-white rounded-lg shadow-md p-6">
                <h2 class="text-xl font-semibold mb-4">STATUS</h2>
                <form id="StatusForm" class="space-y-4">
                  <div>
                    <label
                      for="Status"
                      class="block text-gray-700 font-bold mb-2"
                      >Status</label
                    >
                    <select
                      id="KerjaStatus"
                      name="Status"
                      class="shadow border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
                    >
                      <option value="">Langsung Kerja</option>
                      <option value="">Belum Kerja</option>
                    </select>
                  </div>
                  <div>
                    <label
                      for="Year"
                      class="block text-sm font-medium text-gray-700"
                      >Tahun</label
                    >
                    <input
                      type="number"
                      id="YearCount"
                      placeholder="Tahun "
                      name="YearCount"
                      min="0"
                      class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
                      required
                    />
                  </div>
                  <div>
                    <label
                      for="Count"
                      class="block text-sm font-medium text-gray-700"
                      >Jumlah</label
                    >
                    <input
                      type="number"
                      id="JumlahCount"
                      placeholder="Tambah Jumlah Disini"
                      name="JumlahCount"
                      min="0"
                      class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
                      required
                    />
                  </div>
                  <button
                    type="submit"
                    class="w-full bg-yellow-500 hover:bg-yellow-600 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline"
                  >
                    Update
                  </button>
                </form>
              </div>

              <!-- Jumlah Lowongan Edit -->
              <div class="bg-white p-6 rounded-lg shadow-md">
                <h2 class="text-xl font-semibold mb-4">LOWONGAN</h2>
                <form id="studentCountForm" class="space-y-4">
                  <div>
                    <label
                      for="pklMonth"
                      class="block text-sm font-medium text-gray-700"
                      >Bulan</label
                    >
                    <select
                      id="pklMonth"
                      name="pklMonth"
                      class="mt-1 shadow border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
                    >
                      <option value="0">Januari</option>
                      <option value="1">Februari</option>
                      <option value="2">Maret</option>
                      <option value="3">April</option>
                      <option value="4">Mei</option>
                      <option value="5">Juni</option>
                      <option value="6">Juli</option>
                      <option value="7">Augustus</option>
                      <option value="8">September</option>
                      <option value="9">October</option>
                      <option value="10">November</option>
                      <option value="11">Desember</option>
                    </select>
                  </div>
                  <div>
                    <label
                      for="studentCount"
                      class="block text-gray-700 font-bold mb-2"
                      >Jumlah</label
                    >
                    <input
                      type="number"
                      id="studentCount"
                      name="studentCount"
                      min="0"
                      class="mt-1 shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
                      required
                    />
                  </div>
                  <button
                    type="submit"
                    class="w-full bg-yellow-500 hover:bg-yellow-600 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline"
                  >
                    Update
                  </button>
                </form>
              </div>
            </div>
          </div>
        </main>
      </div>
    </div>

    <script src="../../static/js/chart.js"></script>
    <script>
       fetch('/api/aluni')
            .then(response => response.json())
            .then(data => {
                console.log(data);

                // Urutkan data berdasarkan tahun yang ada di data API
                const sortedYears = Object.keys(data).sort((a, b) => b - a); // Mengurutkan tahun secara menurun

                // Pisahkan data untuk chart
                const kerjaData = sortedYears.map(year => data[year].kerja || 0);
                const belumKerjaData = sortedYears.map(year => data[year]['belum-kerja'] || 0);
                const years = sortedYears; // Tahun yang akan digunakan untuk sumbu X

                var options = {
                    series: [
                        {
                            name: "Kerja",
                            data: kerjaData,
                        },
                        {
                            name: "Belum Kerja",
                            data: belumKerjaData,
                        },
                    ],
                    chart: {
                        height: 350,
                        type: 'area',
                    },
                    dataLabels: {
                        enabled: false,
                    },
                    stroke: {
                        curve: 'smooth',
                    },
                    xaxis: {
                        categories: years, // Menggunakan tahun sebagai kategori di sumbu X
                    },
                    tooltip: {
                        x: {
                            format: 'yyyy', // Format tooltip untuk tahun
                        },
                    },
                };

                var chart = new ApexCharts(document.querySelector("#ChartAlumni"), options);
                chart.render();
            })
            .catch(error => console.error('Error:', error));
      // Chart 4
      var options = {
        series: [
          {
            name: "Desktops",
            data: [10, 41, 35, 51, 49, 62, 69, 91, 148],
          },
        ],
        chart: {
          height: 350,
          type: "line",
          zoom: {
            enabled: false,
          },
        },
        dataLabels: {
          enabled: false,
        },
        stroke: {
          curve: "straight",
        },
        title: {
          text: "Product Trends by Month",
          align: "left",
        },
        grid: {
          row: {
            colors: ["#f3f3f3", "transparent"], // takes an array which will be repeated on columns
            opacity: 0.5,
          },
        },
        xaxis: {
          categories: [
            "Jan",
            "Feb",
            "Mar",
            "Apr",
            "May",
            "Jun",
            "Jul",
            "Aug",
            "Sep",
          ],
        },
      };

      var chart = new ApexCharts(document.querySelector("#Chart4"), options);
      chart.render();
    </script>
  </body>
</html>
